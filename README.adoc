:toc:

This library uses the zxing library, which provides a simple API to create QR codes.

== Creating QR Codes with Kotlin or Java

The entry point for this library is the `QrCodeFactory`,
which will give you an instance of the `QrCodeApi` to create a QR code as `BufferedImage`.
This `BufferedImage` can be configured by passing an instance of `QrCodeConfig` and use for further image processing.

Examples for Java or Kotlin can be found in the https://github.com/SimonScholz/qr-code-with-logo/blob/main/java-sample/src/main/java/io/github/simonscholz/Main.java[`java-sample`] or https://github.com/SimonScholz/qr-code-with-logo/blob/main/kotlin-sample/src/main/kotlin/io/github/simonscholz/Main.kt[`kotlin-sample`] module.

== Quickstart

=== Gradle

Getting a released version:

[source, kotlin]
----
dependencies {
    implementation("io.github.simonscholz:qr-code-with-logo:0.1.0")
}
----

Using the snapshot version:

[source, kotlin]
----
repositories {
    mavenCentral()
    maven(
        url = "https://s01.oss.sonatype.org/content/repositories/snapshots/"
    )
}

dependencies {
    implementation("io.github.simonscholz:qr-code-with-logo:0.1.0-SNAPSHOT")
}
----

=== Maven

[source, xml]
----
<dependency>
    <groupId>io.github.simonscholz</groupId>
    <artifactId>qr-code-with-logo</artifactId>
    <version>0.1.0</version>
</dependency>
----

== kotlin

[source, kotlin]
----
import io.github.simonscholz.qrcode.QrCodeFactory.createQrCodeApi
import io.github.simonscholz.qrcode.DEFAULT_IMG_SIZE
import io.github.simonscholz.qrcode.QrCodeConfig
import java.awt.image.BufferedImage
import java.io.File
import javax.imageio.ImageIO

// extension function to write a BufferedImage to a file
fun BufferedImage.toFile(file: File) {
    ImageIO.write(this, "png", file)
}

val qrCodeApi = createQrCodeApi()
qrCodeApi.createQrImage(QrCodeConfig("https://simonscholz.github.io/", DEFAULT_IMG_SIZE))
    .toFile(File("qr-with-defaults-kotlin.png"))
----

For more advanced examples, please have a look at the https://github.com/SimonScholz/qr-code-with-logo/blob/main/kotlin-sample/src/main/kotlin/io/github/simonscholz/Main.kt[`kotlin-sample` module].

== java

[source, java]
----
import io.github.simonscholz.qrcode.QrCodeApi;
import io.github.simonscholz.qrcode.QrCodeConfig;
import io.github.simonscholz.qrcode.QrCodeFactory;
import javax.imageio.ImageIO;
import java.io.File;

import static io.github.simonscholz.qrcode.QrCodeConfigKt.DEFAULT_IMG_SIZE;

final QrCodeApi qrCodeApi = QrCodeFactory.createQrCodeApi();
final var qrCode = qrCodeApi.createQrImage(new QrCodeConfig("https://simonscholz.github.io/", DEFAULT_IMG_SIZE));
ImageIO.write(qrCode, "png", new File("qr-with-defaults-java.png"));
----

For more advanced examples, please have a look at the https://github.com/SimonScholz/qr-code-with-logo/blob/main/java-sample/src/main/java/io/github/simonscholz/Main.java[`java-sample` module].

== Logo scaling

Scaling down the logo image in advance will improve the image quality of the logo.

But compare yourself:

Logo with 500x500px (Qr Code size=300px):

image::./docs/qr-with-logo-unscaled.png[]

Logo with 60x60px (Qr Code size=300px):

image::./docs/qr-with-logo-scaled.png[]

NOTE: I chose 60x60px, because the default logo relative size is 0.2, which means 20% of the QR code size, which is 60x60px when having a 300x300px qr code (300*0.2=60).

The reason for this is the fact that the scaling capabilities of awt are *not* that good.

So you should either scale the logo manually or use the following beforehand:

- java.awt.Image.getScaledInstance(int width, int height, int hints)
- https://github.com/rkalla/imgscalr
- https://github.com/downgoon/marvin
- https://github.com/coobird/thumbnailator

== Example QR codes

All the examples you can see here are implemented in the `java-sample` and `kotlin-sample` modules.

=== Shapes

Using the defaults only:

image::./docs/qr-with-defaults.png[]

Adding a center logo:

image::./docs/qr-with-logo.png[]

Adding a border:

image::./docs/qr-with-logo-and-border.png[]

Adding radius to positional squares:

image::./docs/qr-with-logo-and-border-and-p-border-round.png[]

Having circles as positional "squares":

image::./docs/qr-with-logo-and-border-and-p-border-circle.png[]

=== Colors

Add some decent red color:

image::./docs/decent-red-color.png[]

Make it look like a Minecraft Creeper QR code:

image::./docs/minecraft-creeper-color.png[]

Make the QR code transparent and draw it onto a background image:

image::./docs/transparent-color.png[]

To see what's possible with colors, have a look at the rainbow example in the bad examples below.

=== Types

In order to create certain types of QR codes, you can may want to use the following utils.

Please see https://github.com/SimonScholz/qr-code-with-logo/blob/main/kotlin-sample/src/main/kotlin/io/github/simonscholz/QrCodeTypesMain.kt[`kotlin-sample` module] or https://github.com/SimonScholz/qr-code-with-logo/blob/main/java-sample/src/main/java/io/github/simonscholz/QrCodeTypesMain.java[`java-sample` module] to use these types and run the samples.

==== Simple types

```java
String url = SimpleTypes.url("https://simonscholz.github.io/");

String geolocation = SimpleTypes.geolocation(53.59659752940634, 10.006589989354053);

String email = SimpleTypes.email("simon@example.com", "Hello World", "This is a test email");

String phoneNumber = SimpleTypes.phoneNumber("+49 176 12345678");

String sms = SimpleTypes.sms("+49 176 12345678", "Hello, this is a test SMS");
```

These String values can be used to create a QR code.

.See simple QR Code type images
[%collapsible]
====
Simple url:

image::./docs/types/simple-url.png[]

Simple geolocation:

image::./docs/types/simple-geolocation.png[]

Simple email:

image::./docs/types/simple-email.png[]

Simple phoneNumber:

image::./docs/types/simple-phoneNumber.png[]

Simple sms:

image::./docs/types/simple-sms.png[]
====

==== More complex types

VEVENT type:

```java
LocalDateTime startDateTime = LocalDateTime.now().plusWeeks(2);
VEvent vevent = new VEvent.Builder("QR Codes with Kotlin & Java")
                .location("Java User Group Hamburg")
                .startDate(startDateTime)
                .endDate(startDateTime.plusHours(2))
                .description("Let's create QR Codes with Kotlin & Java")
                .build();
String vEventQrCodeText = vevent.toVEventQrCodeText();
```

The `vEventQrCodeText` can then be used to create a QR code.

.See QR Code image
[%collapsible]
====
image::./docs/types/vevent.png[]
====

VCARD type:

```java
VCard vCard = new VCard.Builder("Simon Scholz")
                .email("simon@example.com")
                .address("Main Street 1", "Hamburg", "22855")
                .organization("Self Employed")
                .phoneNumber("+49 176 12345678")
                .website("https://simonscholz.github.io/")
                .build();
String vCardQrCodeText = vCard.toVCardQrCodeText();
```

The `vCardQrCodeText` can then be used to create a QR code.

.See QR Code image
[%collapsible]
====
image::./docs/types/vCard.png[]
====

== Bad examples

Not having enough contrast:

image::./docs/not-enough-contrast.png[]

The rainbow QR code to depict what's possible:

image::./docs/rainbow-color.png[]

These are bad examples, because the colors are not contrasting enough.

So please be cautious when changing the colors!
*Not* having enough contrast may cause that qr code scanners are not capable to read the qr code!
If you try to scan the bad exmaple qr codes from above, you will see that it's not working.

== Useful sources

- https://zxing.org/w/decode.jspx[Decoding qr codes using zxing]
- https://www.qrcode.com/en/about/version.html[QR Code Versions]
- https://android.googlesource.com/platform/frameworks/opt/vcard/+/ics-mr1/java/com/android/vcard/VCardConstants.java[Android VCardConstants]
- https://simonscholz.github.io/tutorials/publish-maven-central-gradle[How I published this library to Maven Central]

== Kudos ❤️

Thank you so much @lome for providing this awesome code at https://github.com/lome/niceqr,
where I gained a lot of ideas and adopted some parts of the code.
